## SpringCloud Demo简介

### 框架功能描述
SpringCloud按照项目部署可以分为以下几个部分注册中心（服务目录服务）、配置中心（集中式配置管理中心）、服务端（服务提供者）、客户端（服务消费者）、服务网关。
#### 注册中心
1. 注册中心(spring-cloud-register模块),主要要功能就是服务注册与服务发现,每个应用启动时都会将自己的应用名称以及提供的接口注册到注册中心以提供给其他应用调用，同时订阅发现其他应用提供的服务用于自己消费。注册中心维护着所有的服务注册信息。
2. 目前注册中心的实现有eureka、consul、zookeeper等等。
3. demo中以eureka举例，通过启动类添加`@EnableEurekaServer`和配置文件标注当前服务为注册中心服务类。
4. 注册中心优先启动，否则别的服务无法注册。
5. 注册中心的集群策略不概述。

#### 配置中心
1. 配置中心统一管理应用配置文件。配置中心的加入可以避免当配置变更时应用重新打包发布等操作。并且还可以在运行期间动态修改配置。
2. 配置中心注册后，服务提供和消费的应用就可以动态的使用配置中心的配置文件，而无需自行维护。
3. 配置中心需在服务提供和消费应用启动前启动，否则无法获取配置。
4. 配置中心可以管理多应用对应的多环境的配置文件
5. 集群策略不概述。


#### 服务提供者
1. 服务提供者在整个分布式架构中起着非常重要的角色。其他应用依赖于该角色提供的服务才能够正常的运行，同时服务提供者也可以消费其他服务提供者提供的服务。
2. 服务提供者代表具体的业务实现方应用，提供别的应用完成对应的业务逻辑。
3. 服务提供者提供对应的接口描述，方便消费端调用。


#### 服务消费者
1. 服务消费者主要就是通过消费其他服务提供者提供的服务来完成自己的业务逻辑，从而对外提供各种各样的系统功能。
2. 服务消费者对外提供用户接口访问，用以描述具体可操作的业务行为。
3. 服务消费者通过调用服务提供者完成业务流程。

#### 服务网关
1. 网关是系统的唯一对外的入口，介于客户端和服务器端之间的中间层，处理非业务功能 提供路由请求、鉴权、监控、缓存、限流等功能。它将"1对N"问题转换成了"1对1”问题。
2. 通过服务路由的功能，可以在对外提供服务时，只暴露网关中配置的调用地址，而调用方就不需要了解后端具体的微服务主机。
3. 服务网关的最大的功能：路由转发 + 过滤器;
    路由转发：接收一切外界请求，转发到后端的微服务上去。
    过滤器：在服务网关中可以完成一系列的横切功能，例如权限校验、限流以及监控等，这些都可以通过过滤器完成（其实路由转发也是通过过滤器实现的）。
4. 官方推荐使用Netflix的Zuul网关。
5. 可以配置Hystrix来解决服务之间相互调用失败，避免产生蝴蝶效应的熔断器，以及提供降级选项。Hystrix通过隔离服务之间的访问点，阻止它们之间的级联故障以及提供默认选项来实现这一目标，以提高系统的整体健壮性。


### 项目模块简介

#### spring-cloud-register模块（注册中心）
1. pom中引入eureka相关依赖包。
2. 启动类中标注`@EnableEurekaServer`为注册中心服务。
3. 配置文件中指定注册中心配置
4. 启动顺序 - 1

#### spring-cloud-configure模块（配置中心）
1. pom中引入eureka、config-server中的相关依赖包。
2. 启动类中标注@EnableDiscoveryClient、@EnableConfigServer用于服务发现和启用配置服务。
3. 配置文件中指定注册中心地址。
4. 启动顺序 - 2
5. 维护不同服务，不同环境的配置文件

#### spring-cloud-zuul模块（服务网关）
1. pom中引入eureka、zuul的相关依赖包。
2. 启动类中标注@EnableZuulProxy、@EnableDiscoveryClient用于启用网关和服务发现。
3. 配置文件中配置注册中心地址以及不同应用服务的路由和限流策略。
4. 启动顺序 - 3，另：不通过网关访问的服务提供方与消费方无需关注启动顺序。
5. 可通过不同的过滤器实现鉴权、缓存、监控等功能。

#### spring-cloud-server-one模块和spring-cloud-server-two模块（服务提供者，用于模拟多个服务应用）
1. pom中引入eureka、config-server相关依赖包。
2. 启动类中标注@EnableDiscoveryClient用于服务发现注册。
3. 提供服务接口用于消费方调用。
4. 无启动顺序

#### spring-cloud-client模块（服务消费者，用于对用户提供业务服务）
1. pom中引入eureka、feign相关依赖包
2. 启动类标注@EnableDiscoveryClient、@EnableCircuitBreaker、@EnableFeignClients用于服务发现和启用熔断器
3. 通过feign或者http rest模式调用服务提供者，推荐feign方式，不建议http rest。
4. 提供用户业务接口
5. 通过@HystrixProperty、@HystrixCommand等用于对服务提供熔断触发条件和机制。
6. 定义@FeignClient用于描述服务提供者的具体服务。
7. 无启动顺序。

#### 配置文件中所有关于IP的地址均需替换为实际的注册中心地址，如果本地测试，则全部替换为本地IP即可。


https://github.com/yu199195/happylifeplat-transaction
